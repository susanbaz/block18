"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.renderCss = void 0;
const output_1 = require("./output");
const patch_css_1 = require("@jesscss/patch-css");
/**
 * Given a root node (usually from a module) render to CSS
 */
const renderCss = (root, context) => {
    const evaldRoot = root.eval(context);
    const result = {
        /**
         * @todo - patch document in browser
         */
        $toCSS: () => {
            const out = new output_1.OutputCollector;
            evaldRoot.toCSS(context, out);
            const css = out.toString();
            patch_css_1.updateSheet(css, context.id);
            return css;
        },
        $root: evaldRoot
    };
    return result;
};
exports.renderCss = renderCss;
