"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const chai_1 = require("chai");
require("mocha");
const __1 = require("..");
const context_1 = require("../../context");
const output_1 = require("../../output");
let context;
let out;
describe('Root', () => {
    beforeEach(() => {
        context = new context_1.Context;
        context.id = 'testing';
        out = new output_1.OutputCollector;
    });
    it('should serialize to a module', () => {
        const node = __1.root([]);
        node.toModule(context, out);
        chai_1.expect(out.toString()).to.eq('import * as $J from \'jess\'\nconst $CONTEXT = new $J.Context({})\n$CONTEXT.id = \'testing\'\nfunction $DEFAULT ($VARS = {}, $RETURN_NODE) {\n  const $TREE = $J.root((() => {\n    const $OUT = []\n    return $OUT\n  })(),[])\n  if ($RETURN_NODE) {\n    return $TREE\n  }\n  return {\n    ...$J.renderCss($TREE, $CONTEXT)\n  }\n}\nconst $DEFAULT_PROXY = $J.proxy($DEFAULT, $CONTEXT)\n$DEFAULT_PROXY(undefined, true)\nexport default $DEFAULT_PROXY');
    });
});
